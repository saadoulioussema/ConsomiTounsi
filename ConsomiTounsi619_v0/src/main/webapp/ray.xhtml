<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://xmlns.jcp.org/jsf/html"
xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
xmlns:f="http://xmlns.jcp.org/jsf/core"
xmlns:p="http://primefaces.org/ui" template="/template/template.xhtml">

<ui:param name="page_name" value="Consomi TN !"/>

<ui:define name="welcome">
<f:view>
<h:head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>test</title>
</h:head>
<h:body  >


<h:panelGroup>
<h:form>
<h:outputText value="Welcome #{rayController.username}"  style="font-weight: bold;color:red;height:120px"/>

<h:commandLink value="LOG OUT"  class="btn btn-danger btn-rounded btn-fw" 
action="#{rayController.doLogout()}" />

</h:form>
</h:panelGroup>




<h:panelGroup columns="2" style="margin-bottom:10px">
<h:form>
<table>

<tr>
<td><h:outputText value="Capacity"></h:outputText></td>
<td><p:spinner id="spinner" value="#{rayController.capacity}"/></td>
  
</tr>

<tr>
<td><h:outputText value="Type"></h:outputText></td>
<td><h:selectOneMenu value="#{rayController.typeray}" required="true">

<f:selectItems value="#{data.types}" />
</h:selectOneMenu></td>
</tr>

<tr>
<td  colspan="1"><h:outputText value="Category"></h:outputText></td>
<td>

<h:selectOneMenu value="#{rayController.categoryray}" required="true">

<f:selectItems value="#{data.categories}" />
</h:selectOneMenu></td>
</tr>

<tr>
<td colspan="2"><h:commandButton value="Add Ray" action="#{rayController.ajouterRay()}" class="btn btn-danger btn-rounded btn-fw" /></td>
<td>

<h:commandButton action="#{rayController.mettreAjourRay()}"
value="Update ray" class="btn btn-light"/>

</td>
</tr>
</table>
</h:form>
</h:panelGroup>


<h:panelGroup columns="2">
<h:form>
<h:dataTable value="#{rayController.rays}" var="ray" border="1" id="aaa" >

<h:column>
<f:facet name="header">
<h:outputText value="Capacity" />
</f:facet>
<h:outputText value="#{ray.capacity}" />
</h:column>

<h:column>
<f:facet name="header">
<h:outputText value="Type" />
</f:facet>
<h:outputText value="#{ray.typeray}" />
</h:column>

<h:column>
<f:facet name="header">
<h:outputText value="Category" />
</f:facet>
<h:outputText value=" #{ray.categoryray}" />
</h:column>

<h:column>
<f:facet name="header">
<h:outputText value="Username" />
</f:facet>
<h:outputText value="#{ray.user.username}" />
</h:column>

<h:column>
<f:facet name="header">
<h:outputText value="Action" />
</f:facet>


<p:commandButton action="#{rayController.deleteray(ray.id)}" value="Delete" update="aaa" >
 <p:confirm header="Confirmation" message="Are you sure?" icon="pi pi-exclamation-triangle" />
</p:commandButton>

<p:commandButton action="#{rayController.modifier(ray)}"
value="Edit" />
</h:column>

</h:dataTable>  
</h:form>
</h:panelGroup>

<h:form>
<p:confirmDialog global="true" closeOnEscape="true" showEffect="explode"  >
      <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
      <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
</p:confirmDialog>    
</h:form>

</h:body>
</f:view>
</ui:define>

</ui:composition>